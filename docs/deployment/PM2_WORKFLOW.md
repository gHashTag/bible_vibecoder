# üïâÔ∏è PM2 Development Workflow - Bible VibeCoder

–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ —Å PM2, live –ª–æ–≥–∞–º–∏ –∏ –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –ø–æ—Ä—Ç–∞–º–∏ Inngest.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –û–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ–≥–æ:

```bash
bun dev
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞:

- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–≤–æ–±–æ–¥–Ω–æ—Å—Ç—å –ø–æ—Ä—Ç–æ–≤ 9288 –∏ 9289
- ‚úÖ –ó–∞–ø—É—Å–∫–∞–µ—Ç Telegram Bot —á–µ—Ä–µ–∑ PM2 —Å hot reload
- ‚úÖ –ó–∞–ø—É—Å–∫–∞–µ—Ç Inngest Dev Server –Ω–∞ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø–æ—Ä—Ç–∞—Ö
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç live –ª–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–∏ —Å–±–æ—è—Ö

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:

```bash
bun run dev:stop
```

## üìä –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

```bash
# –ó–∞–ø—É—Å–∫ development –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å live –ª–æ–≥–∞–º–∏
bun dev

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
bun run dev:stop

# –¢–æ–ª—å–∫–æ –±–æ—Ç (–±–µ–∑ Inngest)
bun run dev:bot-only

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
bun run pm2:status

# Live –ª–æ–≥–∏
bun run pm2:logs

# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
bun run pm2:monit

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
bun run pm2:restart
```

### PM2 –∫–æ–º–∞–Ω–¥—ã –Ω–∞–ø—Ä—è–º—É—é:

```bash
# –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
pm2 status

# –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
pm2 logs telegram-bot
pm2 logs inngest-dev

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
pm2 restart telegram-bot
pm2 restart inngest-dev

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
pm2 delete telegram-bot
pm2 delete inngest-dev

# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
pm2 monit

# –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ PM2
pm2 kill
```

## üéØ –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

- **ü§ñ Telegram Bot**: –†–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–µ —Å hot reload
- **üìä Inngest Dashboard**: http://localhost:9288/dashboard
- **üîç PM2 Monitoring**: `pm2 monit` –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–æ–≥–æ–≤

```
logs/
‚îú‚îÄ‚îÄ telegram-bot.log       # –í—Å–µ –ª–æ–≥–∏ –±–æ—Ç–∞
‚îú‚îÄ‚îÄ telegram-bot-out.log   # Stdout –±–æ—Ç–∞
‚îú‚îÄ‚îÄ telegram-bot-error.log # Stderr –±–æ—Ç–∞
‚îú‚îÄ‚îÄ inngest-dev.log        # –í—Å–µ –ª–æ–≥–∏ Inngest
‚îú‚îÄ‚îÄ inngest-dev-out.log    # Stdout Inngest
‚îî‚îÄ‚îÄ inngest-dev-error.log  # Stderr Inngest
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PM2

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `ecosystem.config.cjs`:

```javascript
{
  apps: [
    {
      name: 'telegram-bot',
      script: 'bun',
      args: 'run --watch index.ts', // Hot reload
      max_memory_restart: '500M', // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ø–∞–º—è—Ç–∏
      autorestart: true, // –ê–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ —Å–±–æ—è—Ö
    },
    {
      name: 'inngest-dev',
      script: 'npx',
      args: ['inngest-cli', 'dev', '--port', '9288', '--gateway-port', '9289'],
      max_memory_restart: '300M',
      autorestart: true,
    },
  ];
}
```

## üö® –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü–æ—Ä—Ç—ã –∑–∞–Ω—è—Ç—ã

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Ä–µ—à–µ–Ω–∏–µ
bun dev  # –°–∫—Ä–∏–ø—Ç —Å–∞–º –ø–æ–∫–∞–∂–µ—Ç —á—Ç–æ –¥–µ–ª–∞—Ç—å

# –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
lsof -i :9288
lsof -i :9289

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
bun run dev:stop
pm2 kill

# –£–±–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å
kill -9 <PID>
```

### PM2 –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ PM2
npm uninstall -g pm2
npm install -g pm2

# –°–±—Ä–æ—Å PM2
pm2 kill
pm2 update
```

### –õ–æ–≥–∏ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è

```bash
# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
pm2 delete all
pm2 kill
bun dev
```

### –ü—Ä–æ—Ü–µ—Å—Å—ã –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è

```bash
# –ñ–µ—Å—Ç–∫–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
pm2 kill

# –ï—Å–ª–∏ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç
sudo pm2 kill

# –ü–æ–∏—Å–∫ –∑–∞–≤–∏—Å—à–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
ps aux | grep -E "(bun|inngest|node)"
```

## üéØ Workflow —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### 1. –ó–∞–ø—É—Å–∫ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
bun dev
```

### 2. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:

- –†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∫–æ–¥ - hot reload –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π
- –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≥–¥–µ –∑–∞–ø—É—Å—Ç–∏–ª–∏ `bun dev`
- –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ Inngest —Ñ—É–Ω–∫—Ü–∏–∏ —á–µ—Ä–µ–∑ Dashboard

### 3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:

```bash
# –í –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
pm2 monit
```

### 4. –û—Å—Ç–∞–Ω–æ–≤–∫–∞:

```bash
# Ctrl+C –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Å `bun dev`
# –ò–ª–∏ –≤ –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
bun run dev:stop
```

## üåü –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ PM2 –ø–æ–¥—Ö–æ–¥–∞

- ‚úÖ **–ê–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫** –ø—Ä–∏ —Å–±–æ—è—Ö
- ‚úÖ **Hot reload** –¥–ª—è –±–æ—Ç–∞
- ‚úÖ **–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
- ‚úÖ **Centralized logging** –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
- ‚úÖ **Memory monitoring** –∏ –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
- ‚úÖ **Live logs** –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ **Easy management** —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—ã
- ‚úÖ **Production ready** - —Ç–æ—Ç –∂–µ PM2 –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞

## üîÆ Advanced –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –¢–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å:

```bash
# –¢–æ–ª—å–∫–æ –±–æ—Ç
pm2 start ecosystem.config.cjs --only telegram-bot

# –¢–æ–ª—å–∫–æ Inngest
pm2 start ecosystem.config.cjs --only inngest-dev
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `ecosystem.config.cjs`
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ: `pm2 restart all`

### Production deploy:

```bash
pm2 start ecosystem.config.cjs --env production
```

---

_üïâÔ∏è –°–æ–∑–¥–∞–Ω–æ –¥–ª—è –≥–∞—Ä–º–æ–Ω–∏—á–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å –ø–æ–ª–Ω—ã–º –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –Ω–∞–¥ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ –∏ –ª–æ–≥–∞–º–∏._
